@using Microsoft.AspNetCore.Mvc.TagHelpers
@using ShoppingBackstage.ViewComponents
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] 後臺管理</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="~/lib/bootstrap-5.2.2-dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/style.min.css" asp-append-version="true" />
    
    <link href="~/lib/bootstrap-datetimepicker/bootstrap-datetimepicker.css" rel="stylesheet" />
    <link href="~/lib/select2/select2.min.css" rel="stylesheet" />
</head>
<body>
    <!-- sidebar -->
    <div class="sidebar sidebar-fixed" id="sidebar" style="background-color:#3c4b64">
        <div class="d-none d-md-flex">
            <a class="header-toggler d-none d-md-block" href="/" title="返回首頁">
                <img src="/images/logo.png" class="img-fluid" alt="">
            </a>
            <a class="header-brand d-md-none" href="/" title="返回首頁">
                <img src="/images/logo.png" alt="">
            </a>
        </div>
        @await Component.InvokeAsync( typeof( MenuViewComponent ) )
    </div>

    <div class="wrapper d-flex flex-column min-vh-100 bg-light">

        <header class="header header-sticky mb-4">
            <div class="container-fluid">
                <button class="header-toggler px-md-0 me-md-3" type="button" onclick="coreui.Sidebar.getInstance(document.querySelector('#sidebar')).toggle()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-lg" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path>
                    </svg>
                </button>
                <ul class="header-nav ms-auto">
                    <li class="nav-item">
                        <div class="nav-link">
                            <span>您的身份 :
                                @if (User.Identity?.IsAuthenticated == true)
                                {
                                    @User.Identity.Name
                                }
                                else
                                {
                                    @:Guest
                                }
                            </span>
                        </div>
                    </li>     
                    <li class="nav-item">
                        <a class="nav-link" href="/Login/Logout" title="登出">
                            登出<i class="bi bi-door-closed"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </header>
        <div class="container-fluid p-2">
            @RenderBody()
        </div>
    </div>
    
    <!-- 套件 -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js"></script>

    <!-- CoreUI and necessary plugins-->
    <script src="~/vendors/coreui/coreui.bundle.min.js"></script>
    <script src="~/vendors/simplebar/simplebar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>

    <!-- 分頁用 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajax-unobtrusive/3.2.6/jquery.unobtrusive-ajax.min.js"></script>
    
    <!-- 排序用 -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

    <!-- 驗證錯誤 -->
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

    @await RenderSectionAsync("styles", required: false)
    @await RenderSectionAsync("scripts", required: false)
</body>
</html>
